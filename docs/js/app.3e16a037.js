(function(e){function t(t){for(var s,c,o=t[0],a=t[1],l=t[2],p=0,d=[];p<o.length;p++)c=o[p],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&d.push(r[c][0]),r[c]=0;for(s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s]);u&&u(t);while(d.length)d.shift()();return n.push.apply(n,l||[]),i()}function i(){for(var e,t=0;t<n.length;t++){for(var i=n[t],s=!0,o=1;o<i.length;o++){var a=i[o];0!==r[a]&&(s=!1)}s&&(n.splice(t--,1),e=c(c.s=i[0]))}return e}var s={},r={app:0},n=[];function c(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,c),i.l=!0,i.exports}c.m=e,c.c=s,c.d=function(e,t,i){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(c.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)c.d(i,s,function(t){return e[t]}.bind(null,s));return i},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/yummy/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],a=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=a;n.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"034f":function(e,t,i){"use strict";i("85ec")},1:function(e,t){},"1e6a":function(e,t,i){"use strict";i("aef9")},"443b":function(e,t,i){"use strict";i("de5a")},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var s=i("2b0e"),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"tabs"},[i("ul",[i("router-link",{attrs:{to:{name:"recipes"}}},[e._v(" Recipes ")]),i("router-link",{attrs:{to:{name:"grid"}}},[e._v(" Grid ")]),i("router-link",{attrs:{to:{name:"list"}}},[e._v(" Shopping List "+e._s(e.num_recipes)+" ")])],1)]),i("main",[i("router-view")],1)])},n=[],c=(i("4de4"),{created:function(){this.$store.dispatch("fetchRecipes",{url:"recipes.json",callback:this.onData})},computed:{num_recipes:{get:function(){var e=this.$lodash.filter(this.$store.getters.recipes(),(function(e){return e.active})).length;return 0===e?"":"("+e+")"}}},methods:{onData:function(){console.log("done fetching")}}}),o=c,a=(i("034f"),i("2877")),l=Object(a["a"])(o,r,n,!1,null,null,null),u=l.exports,p=i("8c4f"),d=i("28dd"),f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("section",{},[i("div",{staticClass:"container is-fluid"},[i("p",{staticClass:"subtitle"}),i("table",{staticClass:"table is-bordered "},[i("tbody",e._l(this.shoppingList,(function(t,s){return i("tr",{key:s,class:e.selected(t),on:{click:function(t){return e.toggleRow(s)}}},[i("td",[e._v(" "+e._s(s)+" ")]),i("td",[e._v(" "+e._s(t.quantity)+" ")]),i("td",[e._v(" "+e._s(t.unit)+" ")])])})),0)]),i("hr"),i("br"),i("br")])])])},v=[],m={methods:{toggleRow:function(e){this.$store.dispatch("toggleShoppingList",e)},selected:function(e){return!0===e.active?"is-selected":""}},computed:{shoppingList:{get:function(){return this.$store.getters.shoppingList()}}}},g=m,h=Object(a["a"])(g,f,v,!1,null,null,null),_=h.exports,b=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("section",[i("div",{staticClass:"container is-fluid"},[i("div",{staticClass:"columns is-mobile"},[i("div",{staticClass:"column "},[i("label",{staticClass:"checkbox"},[this.recipe?i("input",{directives:[{name:"model",rawName:"v-model",value:e.recipe.active,expression:"recipe.active"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.recipe.active)?e._i(e.recipe.active,null)>-1:e.recipe.active},on:{click:function(t){return e.toggleRecipe(e.recipe.id)},change:function(t){var i=e.recipe.active,s=t.target,r=!!s.checked;if(Array.isArray(i)){var n=null,c=e._i(i,n);s.checked?c<0&&e.$set(e.recipe,"active",i.concat([n])):c>-1&&e.$set(e.recipe,"active",i.slice(0,c).concat(i.slice(c+1)))}else e.$set(e.recipe,"active",r)}}}):e._e()]),this.recipe?i("div",{staticClass:"subtitle titleadjust"},[e._v(" "+e._s(this.recipe.title)+" ")]):e._e()])]),i("div",{staticClass:"columns is-desktop"},[i("div",{staticClass:"column is-third-desktop is-mobile"},[i("figure",{staticClass:"image"},[i("img",{attrs:{src:e.recipe.image}})])]),i("div",{staticClass:"column is-third-desktop is-mobile"},[i("div",{staticClass:"subtitle"},[e._v(" Process ")]),e._l(this.process,(function(t,s){return i("div",{key:s},[e._v(" "+e._s(s+1)+". "+e._s(t)+" ")])}))],2),i("div",{staticClass:"column is-third-desktop is-mobile"},[i("div",{staticClass:"subtitle"},[e._v(" Process ")]),i("table",{staticClass:"table is-bordered"},[i("tbody",e._l(this.ingredients,(function(t){return i("tr",{key:t.name},[i("td",[e._v(" "+e._s(t.name)+" ")]),i("td",[e._v(" "+e._s(t.quantity)+" ")]),i("td",[e._v(" "+e._s(t.unit)+" ")])])})),0)])])])])])])},y=[],O={methods:{toggleRecipe:function(e){this.$store.dispatch("updateRecipe",e)}},computed:{recipe:{get:function(){return this.$store.getters.recipe(this.$route.params.id)}},process:{get:function(){return this.$store.getters.recipe(this.$route.params.id)["process"]}},ingredients:{get:function(){return this.$store.getters.recipe(this.$route.params.id)["ingredients"]}}}},C=O,S=(i("443b"),Object(a["a"])(C,b,y,!1,null,"1845a5ce",null)),k=S.exports,E=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("section",{},[i("div",{staticClass:"container is-fluid"},[i("table",{staticClass:"table is-bordered "},[i("tbody",e._l(e.recipes,(function(t,s){return i("tr",{key:s},[i("td",{attrs:{width:"40"}},[i("label",{staticClass:"checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.active,expression:"recipe.active"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.active)?e._i(t.active,null)>-1:t.active},on:{click:function(i){return e.toggleRecipe(t.id)},change:function(i){var s=t.active,r=i.target,n=!!r.checked;if(Array.isArray(s)){var c=null,o=e._i(s,c);r.checked?o<0&&e.$set(t,"active",s.concat([c])):o>-1&&e.$set(t,"active",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(t,"active",n)}}})])]),i("td",[i("div",{staticClass:"row"},[i("router-link",{attrs:{to:{name:"recipe",params:{id:t.id}}}},[e._v(" "+e._s(t.title)+" ")])],1)])])})),0)])])])])},P=[],w={methods:{toggleRecipe:function(e){this.$store.dispatch("updateRecipe",e)}},computed:{recipes:{get:function(){return this.$store.getters.recipes()}}}},T=w,$=(i("1e6a"),Object(a["a"])(T,E,P,!1,null,"e7430f4a",null)),A=$.exports,L=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("section",[i("div",{staticClass:"container is-fluid"},[i("div",{staticClass:"columns is-multiline is-mobile"},e._l(e.recipes,(function(t,s){return i("div",{key:s,staticClass:"column is-one-fifth-desktop is-6-mobile"},[i("div",{staticClass:"card"},[i("div",{staticClass:"card-image"},[i("figure",{staticClass:"image is-2by2"},[i("img",{attrs:{src:t.image}})])]),i("footer",{staticClass:"card-footer"},[i("router-link",{staticClass:"card-footer-item",attrs:{to:{name:"recipe",params:{id:t.id}}}},[e._v(" "+e._s(t.title)+" ")])],1)])])})),0)])])])},R=[],I={methods:{toggleRecipe:function(e){this.$store.dispatch("updateRecipe",e)}},computed:{recipes:{get:function(){return this.$store.getters.recipes()}}}},j=I,x=(i("8c71"),Object(a["a"])(j,L,R,!1,null,"536186ba",null)),G=x.exports,N=[{path:"/yummy",component:A,name:"recipes"},{path:"/yummy/grid",component:G,name:"grid"},{path:"/yummy/recipe/:id",component:k,name:"recipe"},{path:"/yummy/list",component:_,name:"list"}],D=N,M=(i("b0c0"),i("2f62")),U=i("2ef0"),q=i.n(U);function J(){return new M["a"].Store({state:{recipes:[],list:{}},getters:{recipes:function(e){return function(){return e.recipes}},recipe:function(e){return function(t){for(var i=0;i<e.recipes.length;i++)if(t==e.recipes[i]["id"])return e.recipes[i]}},shoppingList:function(e){return function(){return e.list}}},mutations:{UPDATE_FROM_LOCAL:function(e){console.log("update_from_local");var t=JSON.parse(window.localStorage.getItem("yummy_store"));e.recipes=q.a.get(t,"recipes",[]),e.list=q.a.get(t,"list",{});for(var i=0;i<e.recipes.length;i++)console.log("local",i,e.recipes[i]["id"],e.recipes[i]["active"])},UPDATE_FROM_WEB:function(e,t){console.log("update_from_web");for(var i=JSON.parse(window.localStorage.getItem("yummy_store")),s=0;s<t.length;s++)t[s]["id"]=s;if(t.length==i["recipes"].length)for(var r=0;r<t.length;r++)t[r]["id"]=r,t[r]["active"]=i["recipes"][r]["active"];e.recipes=t},SAVE_STATE:function(e){console.log("saving state");var t=JSON.stringify(e);window.localStorage.setItem("yummy_store",t)},UPDATE_SHOPPING_LIST:function(e){for(var t=JSON.parse(window.localStorage.getItem("yummy_store")),i=[],s=0;s<e.recipes.length;s++)!0===e.recipes[s]["active"]&&i.push(e.recipes[s]);for(var r={},n=0;n<i.length;n++)for(var c=i[n]["ingredients"],o=0;o<c.length;o++){var a=q.a.get(q.a.get(r,c[o]["name"],{quantity:0}),"quantity"),l=q.a.get(q.a.get(t["list"],c[o]["name"],{}),"active",!1);r[c[o]["name"]]={quantity:c[o]["quantity"]+a,unit:c[o]["unit"],active:l}}e.list=r},TOGGLE_SHOPPING_LIST:function(e,t){e.list[t]["active"]=!e.list[t]["active"]},TOGGLE_RECIPE_ACTIVE:function(e,t){console.log(t),e.recipes[t]["active"]=!e.recipes[t]["active"],console.log(t,e.recipes[t]["active"])}},actions:{fetchRecipes:function(e,t){var i=e.commit,r=t.url,n=t.callback;i("UPDATE_FROM_LOCAL"),s["a"].http.get(r).then((function(e){i("UPDATE_FROM_WEB",e.body),n()})).catch((function(e){console.log(e)})),i("UPDATE_SHOPPING_LIST"),i("SAVE_STATE")},updateRecipe:function(e,t){var i=e.commit;i("TOGGLE_RECIPE_ACTIVE",t),i("UPDATE_SHOPPING_LIST"),i("SAVE_STATE")},toggleShoppingList:function(e,t){var i=e.commit;i("TOGGLE_SHOPPING_LIST",t),i("SAVE_STATE")}}})}s["a"].use(M["a"]),i("b383"),s["a"].config.productionTip=!1,Object.defineProperty(s["a"].prototype,"$lodash",{value:q.a}),s["a"].use(p["a"]),s["a"].use(d["a"]),s["a"].use(M["a"]);var V=new p["a"]({mode:"history",routes:D}),H=J();new s["a"]({store:H,router:V,render:function(e){return e(u)}}).$mount("#app")},"85ec":function(e,t,i){},"8c71":function(e,t,i){"use strict";i("bf6c")},aef9:function(e,t,i){},b383:function(e,t,i){},bf6c:function(e,t,i){},de5a:function(e,t,i){}});
//# sourceMappingURL=app.3e16a037.js.map